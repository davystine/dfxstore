{% extends 'store/base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid px-0">
    <!-- Header -->
    <header class="bg-dark py-5">
        <div class="container">
            <div class="text-center text-white">
                <h1 class="display-4 fw-bolder">Account</h1>
                <p class="lead fw-normal text-white-50 mb-0">Manage your profile, account information, and shipping address</p>
            </div>
        </div>
    </header>

    <!-- Content -->
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10">
                <div class="card shadow-sm">
                    <div class="card-header bg-secondary text-white">
                        <ul class="nav nav-pills nav-justified" id="profileTab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <a class="nav-link active bg-dark text-white" id="profile-tab" data-toggle="pill" href="#profile" role="tab" aria-controls="profile" aria-selected="true">Profile</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link text-white" id="accountinfo-tab" data-toggle="pill" href="#accountinfo" role="tab" aria-controls="accountinfo" aria-selected="false">Account Information</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link text-white" id="shipping-tab" data-toggle="pill" href="#shipping" role="tab" aria-controls="shipping" aria-selected="false">Shipping Address</a>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content" id="profileTabContent">
                            <!-- Profile Information -->
                            <div class="tab-pane fade show active" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                                <form method="POST">
                                    {% csrf_token %}
                                    {{ profile_form.as_p }}
                                    <button type="submit" name="save_profile" class="btn btn-secondary mt-3">Save Profile</button>
                                </form>
                            </div>

                            <!-- Account Information -->
                            <div class="tab-pane fade" id="accountinfo" role="tabpanel" aria-labelledby="accountinfo-tab">
                                <form method="POST">
                                    {% csrf_token %}
                                    {{ accountinfo_form.as_p }}
                                    <button type="submit" name="save_accountinfo" class="btn btn-secondary mt-3">Save Account Information</button>
                                </form>
                            </div>

                            <!-- Shipping Address -->
                            <div class="tab-pane fade" id="shipping" role="tabpanel" aria-labelledby="shipping-tab">
                                <form method="POST">
                                    {% csrf_token %}
                                    {{ shipping_form.as_p }}
                                    <button type="submit" name="save_shipping" class="btn btn-secondary mt-3">Save Shipping Address</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <br></br>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
<script>
    $(document).ready(function () {
        $('#profileTab a').on('click', function (e) {
            e.preventDefault();
            $(this).tab('show');
            $('#profileTab a').removeClass('bg-dark');
            $(this).addClass('bg-dark');
        });
    });
</script>
{% endblock %}
